{% extends 'lms/base.html' %}

{% block title %}Set New Password - Learning Pathway{% endblock %}

{% block content %}
<div class="form-container">
    <div class="form-left" style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.95), rgba(139, 92, 246, 0.95)), url('https://images.unsplash.com/photo-1434030216411-0b793f4b4173?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80'); background-size: cover; background-position: center;">
        <div class="form-left-content">
            <div class="feature-icon" style="font-size: 4rem; margin-bottom: 1.5rem;">üîê</div>
            <h2>Create New Password</h2>
            <p>Choose a strong password to secure your account.</p>
        </div>
    </div>
    
    <div class="form-right">
        <div class="form-card">
            {% if validlink %}
                <div class="form-header">
                    <h2>Set New Password</h2>
                    <p>Enter your new password below</p>
                </div>
                
                {% if messages %}
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                    {% endfor %}
                {% endif %}
                
                <form method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="password1">New Password</label>
                        <input type="password" name="password1" id="password1" placeholder="At least 8 characters" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="password2">Confirm New Password</label>
                        <input type="password" name="password2" id="password2" placeholder="Confirm password" required>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Reset Password</button>
                </form>
            {% else %}
                <div class="form-header">
                    <h2>Invalid Link</h2>
                    <p style="color: var(--danger-color);">This password reset link is invalid or has expired.</p>
                </div>
                
                <div style="text-align: center; margin-top: 2rem;">
                    <a href="{% url 'password_reset' %}" class="btn btn-primary">Request New Link</a>
                </div>
            {% endif %}
            
            <div class="form-footer">
                <p>Remember your password? <a href="{% url 'login' %}">Sign in</a></p>
            </div>
        </div>
    </div>
</div>

<style>
body {
    margin: 0;
    padding: 0;
}

.navbar {
    position: absolute;
    width: 100%;
    background-color: transparent;
    border-bottom: none;
}
</style>
{% endblock %}
